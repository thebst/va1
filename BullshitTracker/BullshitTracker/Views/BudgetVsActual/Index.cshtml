@model IEnumerable<BullshitTracker.Models.PeriodBudgetVsActual>

@{
    ViewBag.Title = "Index";
}

<h2>Budget vs Actual for @ViewBag.PeriodName</h2>

@Html.ActionLink("←Previous", "Index", "BudgetVsActual", new { periodId = @ViewBag.Previous }, new { @class = "btn btn-default btn-large" })
@Html.ActionLink("Next→", "Index", "BudgetVsActual", new { periodId = @ViewBag.Next }, new { @class = "btn btn-default btn-large" })

<br />
<br />

<table class="table">
    <colgroup>
        <col width="80" />
        <col width="200" />
        <col width="100" />
        <col width="100" />
        <col width="100" />

    </colgroup>
    <tr style="font-size:larger">

        <th colspan="2">
            Budget
        </th>

        <th style="text-align:right">
            Budget Amt.
        </th>
        <th style="text-align:right">
            Actual Amt.
        </th>
        <th style="text-align:right">
            % of Budget
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model) {
        <tr style="background-color:azure; font-size:larger">

            <td colspan="2">

                    @Html.ActionLink(item.BudgetName, "Index", "ExpenseDetails", new { Budget = item.BudgetId, Period = item.PeriodId }, null)


            </td>
            
            <td style="text-align:right">

                @Html.DisplayFor(modelItem => item.BudgetedAmount)
            </td>
            <td style="text-align:right; font-weight:bold">

                @Html.DisplayFor(modelItem => item.ActualAmount)
            </td>
            <td style="text-align:right">
                @Html.DisplayFor(modelItem => item.PercentOfBudget)%
            </td>

        </tr>


        foreach (var item2 in item.PeriodCategoryTotals) {
            <tr>
                <td></td>
                
                <td>
                    @Html.ActionLink(item2.CategoryName, "Index", "ExpenseDetails", new { Budget = item2.BudgetId, Period = item2.PeriodId, Category = item2.CategoryId }, null)
 </td>    
                <td></td>

                <td style="text-align:right">
                    @Html.DisplayFor(modelItem => item2.ActualAmount)


                    </td>
                <td style="text-align:right">tbd</td>
                </tr>

                    }


                    }

            <tr style="font-weight:bold; font-size:larger">
                <td>
                    Total
                </td>
                <td></td>
                <td style="text-align:right">

                    @ViewBag.PeriodBudgeted
                </td>
                <td style="text-align:right; font-weight:bold">

                    @ViewBag.PeriodTotalActual
                </td>
                <td style="text-align:right">
                    @ViewBag.PercentOfBudget %
                </td>

            </tr>

        </table>
